第五章 总线与输入输出子系统
============

目录
----------

[TOC]

---

## 1. 概述

## 2. 总线

### 2.1. 总线的分类

#### 2.1.1. 从功能分类

1. 数据总线
2. 地址总线
3. 控制总线

统称为系统总线

#### 2.1.2. 按数据传输格式分类

1. 并行总线
2. 串行总线

#### 2.1.3. 按时序控制方式分类

1. 同步总线
2. 异步总线

#### 2.1.4. 按总线的结构层次分类

1. 芯片内总线
2. 局部总线
3. 系统总线
4. 外部总线

### 2.2. 总线的标准

#### 2.2.1. 总线的技术指标

1. 总线宽度
2. 总线频率
3. 总线带宽与数据传输率

## 3. 直接程序传输方式与接口

主机和外部设备之间的I/O操作可采用3种常见的技术

1. 直接程序传输方式。数据在CPU和I/O设备间直接交换，CPU执行程序来直接控制I/O操作，程序中由一系列的检测设备状态、发送读写命令以及数据传输的指令组成。在这种方式中，当CPU发送一个命令后，它必须等待，直到外设操作完成。
2. 程序中断方式。当CPU发送一个I/O指令后，继续执行其它操作，当外围设备完成工作后，再向CPU提请中断，请求对数据善后处理。
3. 存储器直接访问方式(Direct Memory Access, DMA)。在这种模式下，I/O通过DMA接口直接实现和主存的交换数据，传输过程中不需要CPU的参与。

## 4. 中断方式与接口

### 4.1. 中断的相关概念

#### 4.1.1. 中断方式的典型应用

1. 以中断方式管理中低速I/O操作，使CPU与外部设备并行工作。有意调用，随机处理。
2. 软中断，如指令 INT $n$ 设置程序断点。有意调用，随机插入。
3. 故障处理。如溢出、程序越界等。
4. 实时处理。在事件出现的实际时间内及时地进行处理，而不是积压起来留待以后批量处理。保证生产过程按照设定的标准流程，或按优化的流程进行。
5. 多机通信。节点发出通信请求，对方接受请求后进入中断服务程序，以实现相互通信。
6. 人机对话。用户通过键盘终端或其它设备向计算机输入命令和数据。

#### 4.1.2. 中断的分类

##### 4.1.2.1. 硬件中断和软件中断

硬件中断是由某个硬件中断请求信号引发的中断。

软中断是由执行软终端指令（软件）所引起的中断。

##### 4.1.2.2. 强迫中断和自愿中断

强迫中断是由于故障、外部请求等所引起的强迫性中断，非程序本身安排的。

自愿中断又称为程序自陷中断，即软中断。

##### 4.1.2.3. 内中断和外中断

内中断来自主机内部的中断请求，如掉电中断、软中断等。

外中断值中断源来自主机外部，一般指外部设备中断。

##### 4.1.2.4. 可屏蔽中断和非屏蔽中断

外中断一般可屏蔽，内中断一般是非屏蔽中断。软中断也是不可屏蔽的。

##### 向量中断和非向量中断

如何形成中断服务程序的入口地址，这是向量中断和非向量中断最本质的差别。

如果直接依靠硬件，通过查询中断向量表来确定入口地址，就是向量中断方式。

如果通过执行软件（如中断服务总程序）来确定中断服务程序的入口地址，则属于非向量中断。

## 5. DMA方式与接口

## 6. IOP和PPU

$\epsilon$

$\mu$

$\sigma$

$\phi$

$\delta$
