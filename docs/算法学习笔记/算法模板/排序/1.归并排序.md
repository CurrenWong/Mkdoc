归并排序
===

目录
---

[TOC]

---

```cpp
#define MAXN 1000
#define MAXM 1e9 + 1

int leftArray[MAXN];
int rightArray[MAXN];

//归并array[p…q]与array[q+1…r]
int merge(int* array, int start, int mid, int end)
{
    // 记录逆序数量
    int inversePairNum = 0;
    // 左子序列起始位置
    int n1 = mid - start + 1;
    // 右子序列起始位置
    int n2 = end - mid;
    int i, j;
    // 初始化数组
    memset(leftArray, 0, sizeof(leftArray));
    memset(rightArray, 0, sizeof(rightArray));
    // 数组赋值
    for (i = 0; i < n1; i++)
        leftArray[i] = array[start + i];

    for (j = 0; j < n2; j++)
        rightArray[j] = array[mid + 1 + j];

    leftArray[n1] = MAXM; //避免检查每一部分是否为空
    rightArray[n2] = MAXM;

    // 清零
    i = 0;
    j = 0;
    // 归并
    for (int k = start; k <= end; k++) {
        if (leftArray[i] <= rightArray[j]) {
            array[k] = leftArray[i];
            i++;
        } else {
            array[k] = rightArray[j];
            j++;
            // 若有数字从右往左移动，记录其移动距离
            inversePairNum += n1 - i;
        }
    }
    // 返回逆序数
    return inversePairNum;
}
```
